<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div>
    <p>APPLE</p>
    <input type="button" class="on" value="on">
    <input type="button" class="off" value="off">
    <input type="button" id="bat" value="100">
    <input type="button" id="send" value="send" onclick="sent(iphone,nokia,'nInbox','iSend')">
    <textarea name="iphone" id="iSend" cols="30" rows="10"></textarea>
    <textarea name="iphone" id="iInbox" cols="30" rows="10"></textarea>
</div>
<div>
    <p>NOKIA</p>
    <input type="button" class="on" value="on">
    <input type="button" class="off" value="off">
    <input type="button" id="bat2" value="100">
    <input type="button" id="inbox" value="send" onclick="sent(nokia,iphone,'iInbox','nSend')">
    <textarea name="nokia" id="nSend" cols="30" rows="10"></textarea>
    <textarea name="nokia" id="nInbox" cols="30" rows="10"></textarea>
</div>
<script>
    class Mobile {
        constructor(inbox,sent,write,battery) {
            this._inbox = inbox;
            this._sent = sent;
            this._write = write;
            this._battery = battery;
            this._status = true;
        }

        get message() {
            return this._write;
        }

        set message(value) {
            this._write = value;
        }

        get draft() {
            return this._draft;
        }

        set draft(value) {
            this._draft = value;
        }

        get inbox() {
            return this._inbox;
        }

        set inbox(value) {
            this._inbox = value;
        }

        get sent() {
            return this._sent;
        }

        set sent(value) {
            this._sent = value;
        }

        get battery() {
            return this._battery;
        }

        set battery(value) {
            this._battery = value;
        }

        get status() {
            return this._status;
        }

        set status(value) {
            this._status = value;
        }
       sent(mobile) {
            // Nếu tin nhắn là khoảng trống thì ko gửi được;
            if (this._write == '') {
                return ;
            }
           // Push tin soạn vào tin đã gửi;
           this._sent.push(this._write);
            // Push tin soạn vào hợp thư đến của Mobile muốn gửi;
            mobile._inbox.push(this._write);
       }
    }
    let iphone = new Mobile([],[],[],'',3);
    let nokia = new Mobile([],[],[],'',3);

    function sent(mobileGo,mobileCome,idInbox,isSent) {
        // Khởi tạo biến nhận giá trị từ id DOM của ô soạn tin nhắn;
        let mes = document.getElementById(isSent).value;
        // Trả lại mảng trống để nhập tin tiếp theo;
        document.getElementById(isSent).value = '';
        // Gán lại giá trị từ id DOM vào phần soạn tin nhắn của đt gừi;
        mobileGo.write = mes
        // Gọi phương thức gửi tin nhắn và truyền vào điện thoại muốn gửi;
        mobileGo.sent(mobileCome);
        // Gọi hàm hiển thị nội dung truyền vào id DOM của điện thoại muốn gửi;
        displayInbox(idInbox,mobileCome);
    }
    function displayInbox(idInbox,mobile){
        // Tạo biến chứa nội dung trên id DOM của điện thoại nhận tin;
        let content = document.getElementById(idInbox);
        // Trả lại nội dung trống để lưu tin tiếp theo;
        content.value = '';
        // Dùng lặp để nhận và hiển thị từng tin nhắn được nhận;
        for (let i = 0;i < mobile.inbox.length; i++){
            // Nội dung khi nhận vào hộp thư cộng với br, vòng lặp tiếp theo là 1 tin nhắn mới;
            content.value += mobile.inbox[i] + "\n";
        }
    }

</script>
</body>
</html>